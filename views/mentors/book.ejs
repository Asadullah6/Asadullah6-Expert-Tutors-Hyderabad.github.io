<%- include('../partials/header') -%>

<div style="background-color: #f8f9fa; min-height: 100vh; padding: 2rem 0;">
  <div style="max-width: 700px; margin: 0 auto; background: white; padding: 3rem 2.5rem; border-radius: 16px; box-shadow: 0 4px 30px rgba(0,0,0,0.08);">
    
    <!-- Header Section -->
    <div style="text-align: center; margin-bottom: 3rem;">
      <h1 style="color: #2d3436; font-size: 2.2rem; font-weight: 700; margin-bottom: 0.5rem;">
        Book a Session
      </h1>
      <div style="background: linear-gradient(135deg, #6c5ce7, #a55eea); padding: 0.8rem 1.5rem; border-radius: 25px; display: inline-block; margin-bottom: 1rem;">
        <span style="color: white; font-weight: 600; font-size: 1.1rem;">
          with <%= mentor.user.name %>
        </span>
      </div>
      <p style="color: #636e72; font-size: 1rem; margin: 0;">
        Fill in the details below to schedule your mentoring session
      </p>
    </div>

    <!-- Mentor Info Card -->
    <div style="background: linear-gradient(135deg, #f8f9ff, #f0f2ff); border: 1px solid #e3e8ff; border-radius: 12px; padding: 1.5rem; margin-bottom: 2.5rem;">
      <div style="display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 1rem;">
        <div>
          <h3 style="color: #2d3436; font-size: 1.3rem; font-weight: 600; margin: 0 0 0.5rem 0;">
            <%= mentor.user.name %>
          </h3>
          <p style="color: #636e72; margin: 0; font-size: 0.95rem;">
            <strong>Experience:</strong> <%= mentor.experience || 0 %> years
          </p>
        </div>
        <div style="text-align: right;">
          <div style="background: #6c5ce7; color: white; padding: 0.5rem 1rem; border-radius: 20px; font-weight: 600;">
            PKR <%= mentor.hourlyRate || 0 %>/hr
          </div>
        </div>
      </div>
    </div>

    <!-- Booking Form -->
    <form action="/book/<%= mentor.user._id %>" method="POST" style="display: flex; flex-direction: column;">
      
      <!-- Subject Field -->
      <div style="margin-bottom: 1.8rem;">
        <label style="display: block; font-weight: 600; color: #2d3436; margin-bottom: 0.6rem; font-size: 1rem;">
          Session Subject <span style="color: #e17055;">*</span>
        </label>
        <input 
          type="text" 
          name="subject" 
          required 
          placeholder="e.g., React Component Architecture, Database Design..."
          style="
            width: 100%; 
            padding: 1rem 1.2rem; 
            border: 2px solid #e9ecef; 
            border-radius: 10px; 
            font-size: 1rem;
            background-color: #ffffff;
            box-sizing: border-box;
            transition: all 0.3s ease;
          "
          onfocus="this.style.borderColor='#6c5ce7'; this.style.backgroundColor='#fefefe';"
          onblur="this.style.borderColor='#e9ecef';"
        />
      </div>

      <!-- Date and Time Row -->
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 1.8rem;">
        
        <!-- Date Field -->
        <div>
          <label style="display: block; font-weight: 600; color: #2d3436; margin-bottom: 0.6rem; font-size: 1rem;">
            Date <span style="color: #e17055;">*</span>
          </label>
          <input 
            type="date" 
            name="date" 
            required
            min="<%= new Date().toISOString().split('T')[0] %>"
            style="
              width: 100%; 
              padding: 1rem 1.2rem; 
              border: 2px solid #e9ecef; 
              border-radius: 10px; 
              font-size: 1rem;
              background-color: #ffffff;
              box-sizing: border-box;
              transition: all 0.3s ease;
            "
            onfocus="this.style.borderColor='#6c5ce7';"
            onblur="this.style.borderColor='#e9ecef';"
          />
        </div>

        <!-- Time Field -->
        <div>
          <label style="display: block; font-weight: 600; color: #2d3436; margin-bottom: 0.6rem; font-size: 1rem;">
            Time <span style="color: #e17055;">*</span>
          </label>
          <input 
            type="time" 
            name="time" 
            required
            style="
              width: 100%; 
              padding: 1rem 1.2rem; 
              border: 2px solid #e9ecef; 
              border-radius: 10px; 
              font-size: 1rem;
              background-color: #ffffff;
              box-sizing: border-box;
              transition: all 0.3s ease;
            "
            onfocus="this.style.borderColor='#6c5ce7';"
            onblur="this.style.borderColor='#e9ecef';"
          />
        </div>
      </div>

      <!-- Duration Selection -->
      <div style="margin-bottom: 1.8rem;">
        <label style="display: block; font-weight: 600; color: #2d3436; margin-bottom: 0.6rem; font-size: 1rem;">
          Session Duration
        </label>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 1rem;">
          <label style="display: flex; align-items: center; padding: 1rem; border: 2px solid #e9ecef; border-radius: 10px; cursor: pointer; transition: all 0.3s ease;" onclick="this.style.borderColor='#6c5ce7'; this.style.backgroundColor='#f8f9ff';">
            <input type="radio" name="duration" value="30" style="margin-right: 0.8rem; accent-color: #6c5ce7;">
            <span style="font-weight: 500;">30 minutes</span>
          </label>
          <label style="display: flex; align-items: center; padding: 1rem; border: 2px solid #e9ecef; border-radius: 10px; cursor: pointer; transition: all 0.3s ease;" onclick="this.style.borderColor='#6c5ce7'; this.style.backgroundColor='#f8f9ff';">
            <input type="radio" name="duration" value="60" checked style="margin-right: 0.8rem; accent-color: #6c5ce7;">
            <span style="font-weight: 500;">1 hour</span>
          </label>
          <label style="display: flex; align-items: center; padding: 1rem; border: 2px solid #e9ecef; border-radius: 10px; cursor: pointer; transition: all 0.3s ease;" onclick="this.style.borderColor='#6c5ce7'; this.style.backgroundColor='#f8f9ff';">
            <input type="radio" name="duration" value="90" style="margin-right: 0.8rem; accent-color: #6c5ce7;">
            <span style="font-weight: 500;">1.5 hours</span>
          </label>
        </div>
      </div>

      <!-- Notes Field -->
      <div style="margin-bottom: 2.5rem;">
        <label style="display: block; font-weight: 600; color: #2d3436; margin-bottom: 0.6rem; font-size: 1rem;">
          Additional Notes <span style="color: #81878f; font-weight: 400;">(Optional)</span>
        </label>
        <textarea 
          name="notes" 
          placeholder="Share any specific topics you'd like to discuss, your current skill level, or questions you have..."
          style="
            width: 100%; 
            height: 120px;
            padding: 1rem 1.2rem; 
            border: 2px solid #e9ecef; 
            border-radius: 10px; 
            font-size: 1rem;
            background-color: #ffffff;
            box-sizing: border-box;
            resize: vertical;
            font-family: inherit;
            transition: all 0.3s ease;
          "
          onfocus="this.style.borderColor='#6c5ce7';"
          onblur="this.style.borderColor='#e9ecef';"
        ></textarea>
      </div>

      <!-- Booking Terms -->
      <div style="background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 10px; padding: 1.2rem; margin-bottom: 2rem;">
        <h4 style="color: #d68910; margin: 0 0 0.8rem 0; font-size: 1rem;">Booking Information</h4>
        <ul style="color: #856404; margin: 0; padding-left: 1.2rem; font-size: 0.9rem; line-height: 1.5;">
          <li>Sessions can be cancelled up to 2 hours before the scheduled time</li>
          <li>Payment will be processed after the session is completed</li>
          <li>You'll receive a confirmation email with meeting details</li>
        </ul>
      </div>

      <!-- Submit Button -->
      <button 
        type="submit" 
        style="
          width: 100%;
          padding: 1.2rem;
          background: linear-gradient(135deg, #6c5ce7, #a55eea);
          color: white;
          border: none;
          border-radius: 50px;
          font-size: 1.1rem;
          font-weight: 700;
          cursor: pointer;
          transition: all 0.3s ease;
          box-shadow: 0 4px 20px rgba(108, 92, 231, 0.3);
          text-transform: uppercase;
          letter-spacing: 0.5px;
        "
        onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 8px 25px rgba(108, 92, 231, 0.4)';"
        onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 20px rgba(108, 92, 231, 0.3)';"
      >
        Confirm Booking
      </button>
    </form>
  </div>
</div>

<style>
/* Mobile responsiveness */
@media (max-width: 768px) {
  .container {
    padding: 2rem 1.5rem !important;
    margin: 1rem !important;
  }
  
  .date-time-grid {
    grid-template-columns: 1fr !important;
    gap: 1rem !important;
  }
  
  .duration-grid {
    grid-template-columns: 1fr !important;
  }
  
  h1 {
    font-size: 1.8rem !important;
  }
}

@media (max-width: 480px) {
  .container {
    padding: 1.5rem 1rem !important;
  }
  
  h1 {
    font-size: 1.6rem !important;
  }
}

/* Radio button styling enhancement */
input[type="radio"] {
  width: 18px;
  height: 18px;
}

/* Custom focus states */
input:focus, textarea:focus {
  outline: none;
  box-shadow: 0 0 0 3px rgba(108, 92, 231, 0.1);
}
</style>

<script>
// Set minimum date to today
document.addEventListener('DOMContentLoaded', function() {
  const dateInput = document.querySelector('input[type="date"]');
  if (dateInput) {
    const today = new Date().toISOString().split('T')[0];
    dateInput.setAttribute('min', today);
  }
  
  // Radio button styling
  const radioLabels = document.querySelectorAll('label input[type="radio"]');
  radioLabels.forEach(radio => {
    radio.addEventListener('change', function() {
      // Reset all labels
      radioLabels.forEach(r => {
        r.parentElement.style.borderColor = '#e9ecef';
        r.parentElement.style.backgroundColor = '#ffffff';
      });
      
      // Highlight selected
      if (this.checked) {
        this.parentElement.style.borderColor = '#6c5ce7';
        this.parentElement.style.backgroundColor = '#f8f9ff';
      }
    });
  });
});
</script>

<%- include('../partials/footer') -%>